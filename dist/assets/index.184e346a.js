import{L as V,T as j,ad as F,d as O,r as S,be as P,c as T,w as p,u as R,o as _,ai as I,k as v,F as z,az as A,a as d,f as b,t as m,b as y,p as M,e as U}from"./index.876b0848.js";import{E as $,P as K}from"./card.bb78379b.js";import{v as W,m as Y}from"./index.7dd1da40.js";import{c as q,a as G,b as J,d as Q,e as X,f as Z,t as tt}from"./txt-bg.cfc37550.js";import{E as it}from"./index.446a19bb.js";import{a as et,E as nt}from"./index.1373018a.js";import{E as ot}from"./index.555ca7e6.js";import{t as B,g as lt}from"./position.4a3e563b.js";const f="ElInfiniteScroll",st=50,at=200,rt=0,ct={delay:{type:Number,default:at},distance:{type:Number,default:rt},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},N=(t,e)=>Object.entries(ct).reduce((n,[i,a])=>{var g,r;const{type:s,default:u}=a,o=t.getAttribute(`infinite-scroll-${i}`);let c=(r=(g=e[o])!=null?g:o)!=null?r:u;return c=c==="false"?!1:c,c=s(c),n[i]=Number.isNaN(c)?u:c,n},{}),H=t=>{const{observer:e}=t[f];e&&(e.disconnect(),delete t[f].observer)},dt=(t,e)=>{const{container:n,containerEl:i,instance:a,observer:g,lastScrollTop:r}=t[f],{disabled:s,distance:u}=N(t,a),{clientHeight:o,scrollHeight:c,scrollTop:x}=i,w=x-r;if(t[f].lastScrollTop=x,g||s||w<0)return;let h=!1;if(n===t)h=c-(o+x)<=u;else{const{clientTop:E,scrollHeight:l}=t,k=lt(t,i);h=x+o>=k+E+l-u}h&&e.call(a)};function L(t,e){const{containerEl:n,instance:i}=t[f],{disabled:a}=N(t,i);a||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(i):H(t))}const ft={async mounted(t,e){const{instance:n,value:i}=e;V(i)||j(f,"'v-infinite-scroll' binding value must be a function"),await F();const{delay:a,immediate:g}=N(t,n),r=et(t,!0),s=r===window?document.documentElement:r,u=B(dt.bind(null,t,i),a);if(!!r){if(t[f]={instance:n,container:r,containerEl:s,delay:a,cb:i,onScroll:u,lastScrollTop:s.scrollTop},g){const o=new MutationObserver(B(L.bind(null,t,i),st));t[f].observer=o,o.observe(t,{childList:!0,subtree:!0}),L(t,i)}r.addEventListener("scroll",u)}},unmounted(t){const{container:e,onScroll:n}=t[f];e==null||e.removeEventListener("scroll",n),H(t)},async updated(t){t[f]||await F();const{containerEl:e,cb:n,observer:i}=t[f];e.clientHeight&&i&&L(t,n)}},C=ft;C.install=t=>{t.directive("InfiniteScroll",C)};const ut=C;const pt={class:"infinite-list",style:{overflow:"auto"}},mt=y(" \u53D1\u5E03\u5728 "),gt={href:"/"},kt=O({__name:"index",setup(t){const e=S([]),n=S([q,G,J,Q,X,Z,tt]),i=S(!1),a=async()=>{i.value=!0;const g=await Y(1);e.value=[...e.value,...g.data.data],i.value=!1};return(g,r)=>{const s=it,u=nt,o=U,c=P,x=ot,w=$,h=ut,E=W;return _(),T(R(K),null,{default:p(()=>[I((_(),T(w,null,{default:p(()=>[I((_(),v("ul",pt,[(_(!0),v(z,null,A(e.value,(l,k)=>(_(),v("li",{key:k,class:"infinite-list-item"},[d(x,null,{default:p(()=>[d(s,{class:"list-title"},{default:p(()=>[b("b",null,m(l.name),1),b("div",null,m(l.signature),1)]),_:2},1024),d(s,{class:"list-tags"},{default:p(()=>[(_(!0),v(z,null,A(l.tags,D=>(_(),T(u,{key:D},{default:p(()=>[y(m(D),1)]),_:2},1024))),128))]),_:2},1024),d(s,{class:"list-content",style:M({backgroundImage:`url(${n.value[l.bgimg]})`})},{default:p(()=>[y(m(l.article),1)]),_:2},1032,["style"]),d(s,{class:"list-info"},{default:p(()=>[d(o,{icon:"Avatar"}),d(c,{type:"primary",text:""},{default:p(()=>[y(m(l.cname),1)]),_:2},1024),b("span",null,[mt,b("a",gt,m(l.dynamicType),1)]),b("span",null,m(l.date),1)]),_:2},1024),d(s,{class:"list-action"},{default:p(()=>[d(o,{icon:"Star"}),b("span",null,m(l.star),1),d(o,{icon:"ChatDotRound"}),b("span",null,m(l.like),1),d(o,{icon:"View"}),b("span",null,m(l.view),1)]),_:2},1024)]),_:2},1024)]))),128))])),[[h,a]])]),_:1})),[[E,i.value]])]),_:1})}}});export{kt as default};
