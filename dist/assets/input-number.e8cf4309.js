import{h as ne,bz as te,A as d,a$ as v,d as le,a3 as ie,j as ae,r as ue,ba as se,bF as oe,v as g,bD as V,aW as pe,b8 as de,V as ce,g as be,aT as me,o as m,k as z,ai as G,u as n,n as F,b0 as y,a as C,w as j,c as I,aO as _e,bG as he,N as H,m as L,aP as fe,bH as ge,a5 as T,q as ve,M as Ne,b7 as R,s as xe}from"./index.75d71485.js";import{E as we}from"./index.4dd1d1d1.js";import{C as Ve,I as ye,U as Ie}from"./event.a088884a.js";import{v as W}from"./index.2fc6afd5.js";const Ee=ne({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:te,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:i=>i===null||d(i)||["min","max"].includes(i),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:i=>i>=0&&i===Number.parseInt(`${i}`,10)}}),ke={[Ve]:(i,E)=>i!==E,blur:i=>i instanceof FocusEvent,focus:i=>i instanceof FocusEvent,[ye]:i=>d(i)||v(i),[Ie]:i=>d(i)||v(i)},Se=["aria-label","onKeydown"],Pe=["aria-label","onKeydown"],Ae={name:"ElInputNumber"},ze=le({...Ae,props:Ee,emits:ke,setup(i,{expose:E,emit:c}){const t=i,{t:D}=ie(),p=ae("input-number"),h=ue(),u=se({currentValue:t.modelValue,userInput:null}),{formItem:_}=oe(),B=g(()=>d(t.modelValue)&&N(t.modelValue,-1)<t.min),M=g(()=>d(t.modelValue)&&N(t.modelValue)>t.max),Y=g(()=>{const e=U(t.step);return V(t.precision)?Math.max(U(t.modelValue),e):(e>t.precision,t.precision)}),k=g(()=>t.controls&&t.controlsPosition==="right"),K=pe(),f=de(),q=g(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(v(e))return"";if(d(e)){if(Number.isNaN(e))return"";V(t.precision)||(e=e.toFixed(t.precision))}return e}),O=(e,r)=>{if(V(r)&&(r=Y.value),r===0)return Math.round(e);let l=String(e);const a=l.indexOf(".");if(a===-1||!l.replace(".","").split("")[a+r])return e;const x=l.length;return l.charAt(x-1)==="5"&&(l=`${l.slice(0,Math.max(0,x-1))}6`),Number.parseFloat(Number(l).toFixed(r))},U=e=>{if(v(e))return 0;const r=e.toString(),l=r.indexOf(".");let a=0;return l!==-1&&(a=r.length-l-1),a},N=(e,r=1)=>d(e)?O(e+t.step*r):u.currentValue,S=()=>{if(f.value||M.value)return;const e=t.modelValue||0,r=N(e);A(r)},P=()=>{if(f.value||B.value)return;const e=t.modelValue||0,r=N(e,-1);A(r)},$=(e,r)=>{const{max:l,min:a,step:s,precision:b,stepStrictly:x,valueOnClear:w}=t;let o=Number(e);if(v(e)||Number.isNaN(o))return null;if(e===""){if(w===null)return null;o=Ne(w)?{min:a,max:l}[w]:w}return x&&(o=Math.round(o/s)*s),V(b)||(o=O(o,b)),(o>l||o<a)&&(o=o>l?l:a,r&&c("update:modelValue",o)),o},A=e=>{var r;const l=u.currentValue,a=$(e);l!==a&&(u.userInput=null,c("update:modelValue",a),c("input",a),c("change",a,l),(r=_==null?void 0:_.validate)==null||r.call(_,"change").catch(s=>R()),u.currentValue=a)},J=e=>u.userInput=e,Q=e=>{const r=e!==""?Number(e):"";(d(r)&&!Number.isNaN(r)||e==="")&&A(r),u.userInput=null},X=()=>{var e,r;(r=(e=h.value)==null?void 0:e.focus)==null||r.call(e)},Z=()=>{var e,r;(r=(e=h.value)==null?void 0:e.blur)==null||r.call(e)},ee=e=>{c("focus",e)},re=e=>{var r;c("blur",e),(r=_==null?void 0:_.validate)==null||r.call(_,"blur").catch(l=>R())};return ce(()=>t.modelValue,e=>{u.currentValue=$(e,!0),u.userInput=null},{immediate:!0}),be(()=>{var e;const{min:r,max:l,modelValue:a}=t,s=(e=h.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(l)?s.setAttribute("aria-valuemax",String(l)):s.removeAttribute("aria-valuemax"),Number.isFinite(r)?s.setAttribute("aria-valuemin",String(r)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",String(u.currentValue)),s.setAttribute("aria-disabled",String(f.value)),!d(a)&&a!=null){let b=Number(a);Number.isNaN(b)&&(b=null),c("update:modelValue",b)}}),me(()=>{var e;const r=(e=h.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${u.currentValue}`)}),E({focus:X,blur:Z}),(e,r)=>(m(),z("div",{class:F([n(p).b(),n(p).m(n(K)),n(p).is("disabled",n(f)),n(p).is("without-controls",!e.controls),n(p).is("controls-right",n(k))]),onDragstart:r[0]||(r[0]=T(()=>{},["prevent"]))},[e.controls?G((m(),z("span",{key:0,role:"button","aria-label":n(D)("el.inputNumber.decrease"),class:F([n(p).e("decrease"),n(p).is("disabled",n(B))]),onKeydown:y(P,["enter"])},[C(n(H),null,{default:j(()=>[n(k)?(m(),I(n(_e),{key:0})):(m(),I(n(he),{key:1}))]),_:1})],42,Se)),[[n(W),P]]):L("v-if",!0),e.controls?G((m(),z("span",{key:1,role:"button","aria-label":n(D)("el.inputNumber.increase"),class:F([n(p).e("increase"),n(p).is("disabled",n(M))]),onKeydown:y(S,["enter"])},[C(n(H),null,{default:j(()=>[n(k)?(m(),I(n(fe),{key:0})):(m(),I(n(ge),{key:1}))]),_:1})],42,Pe)),[[n(W),S]]):L("v-if",!0),C(n(we),{id:e.id,ref_key:"input",ref:h,type:"number",step:e.step,"model-value":n(q),placeholder:e.placeholder,disabled:n(f),size:n(K),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[y(T(S,["prevent"]),["up"]),y(T(P,["prevent"]),["down"])],onBlur:re,onFocus:ee,onInput:J,onChange:Q},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}});var Fe=ve(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Me=xe(Fe);export{Me as E};
